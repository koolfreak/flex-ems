<?xml version="1.0" encoding="UTF-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" layout="vertical"
	minWidth="990" minHeight="550"
	height="100%"
	xmlns:view="com.exist.ems.view.screens.*"
	xmlns:control="com.exist.ems.control.*"
	horizontalAlign="center"
	creationComplete="init()">

	<mx:Style source="/css/plain.css"/>

    <mx:Script>
    	<![CDATA[
    		import com.exist.ems.control.events.login.LogOutEvent;
    		import mx.controls.Alert;
    		
    		import com.exist.ems.model.UserModelLocator;
    		
    		[Bindable]
    		private var modelLocator:UserModelLocator = UserModelLocator.getInstance();
    		
    		private function init():void
    		{
    			 Application.application.addEventListener("loginMainEvent",loginHandler);
    		}
    		
    		private function logoutHandler(event:LogOutEvent):void
    		{
    			vsMain.selectedIndex = event.logout;
    			login.userName.text = null;
    			login.password.text = null;
    		}
    		
    		private function loginHandler(event:Event):void
    		{
    			vsMain.selectedIndex = 1;
    		}
    	]]>
    </mx:Script>
    
    <control:EmsFrontController id="frontController"/>
    
    <mx:ViewStack id="vsMain" resizeToContent="true" width="100%"  height="100%">
    	<view:LoginModule id="login"/>
    	<view:WelcomeScreen id="mainScr" logout="logoutHandler(event)" />
    </mx:ViewStack>
    
    <mx:Label text="Â© 2009 by Cybernetics.com" color="#FFFFFF"/>
    
</mx:Application>